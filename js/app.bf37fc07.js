(function(e){function t(t){for(var n,c,o=t[0],s=t[1],l=t[2],d=0,v=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&v.push(a[c][0]),a[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(v.length)v.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var s=r[o];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},i=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=s;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"0cb7":function(e,t,r){"use strict";r("2c2f")},"2c2f":function(e,t,r){},3025:function(e,t){e.exports="data:image/png;base64,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"},"325e":function(e,t,r){},"36c5":function(e,t,r){"use strict";r("f960")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"nav"},[n("router-link",{attrs:{to:"/home"}},[n("img",{staticClass:"nav-image",attrs:{alt:"PDOK logo",src:r("3025")}})])],1),n("router-view")],1)},i=[],c=r("5530"),o=r("5935"),s={name:"App",components:{},computed:Object(c["a"])({},Object(o["b"])({cswBaseUrl:"cswBaseUrl"})),mounted:function(){}},l=s,u=(r("034f"),r("2877")),d=Object(u["a"])(l,a,i,!1,null,null,null),v=d.exports,p=r("8c4f"),m=r("2f62");n["a"].use(m["a"]);var f=new m["a"].Store({state:{cswBaseUrl:"https://nationaalgeoregister.nl/geonetwork/srv/dut/csw",serviceOwner:"Beheer PDOK",records:[],displayItems:[],cswLoaded:!1,fuse:{}},getters:{getField:o["a"]},mutations:{updateField:o["c"]},actions:{}}),h=r("4ae6"),y=r.n(h),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search"},[e.cswLoaded?e._e():r("h2",[e._v("Loading...")]),e.cswLoaded?r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:"search in "+e.records.length+" services from "+e.serviceOwner},domProps:{value:e.query},on:{change:e.search,input:function(t){t.target.composing||(e.query=t.target.value)}}}),r("p",[e._v(e._s(e.displayItems.length)+" results in "+e._s(e.cswBaseUrlHost))]),r("div",{attrs:{id:"results"}},[r("ul",[e._l(e.displayItems,(function(e){return[r("list-item",{key:e.id,attrs:{item:e}})]}))],2)])]):e._e()])},b=[],g=(r("99af"),r("4160"),r("d81d"),r("d3b7"),r("ac1f"),r("3ca3"),r("5319"),r("841c"),r("ddb0"),r("2b3d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",[r("router-link",{attrs:{to:{name:e.item.serviceType,params:{serviceId:e.item.id}}}},[e._v(e._s(e.item.title))])],1)}),S=[],L={name:"ListItem",props:{item:{required:!0,type:Object}},computed:{},mounted:function(){}},A=L,O=(r("c65b"),Object(u["a"])(A,g,S,!1,null,"de0ca794",null)),C=O.exports,_=r("6062"),j=(r("159b"),r("96cf"),r("1da1")),I=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,c,o,s,l,u,d,v,p,m,f,h,y=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=y.length>2&&void 0!==y[2]?y[2]:0,a=50,n<50&&n>0&&(a=n),i=1,c=[];case 5:return o="".concat(t,"?request=GetRecords&Service=CSW&Version=2.0.2&typeNames=gmd:MD_Metadata&resultType=results&constraint=").concat(r,"&constraintLanguage=CQL_TEXT&constraint_language_version=1.1.0&startPosition=").concat(i,"&maxRecords=").concat(a),s=0,e.next=10,fetch(o);case 10:if(l=e.sent,l.ok){e.next=13;break}return e.abrupt("break",32);case 13:return e.next=15,l.text();case 15:for(u=e.sent,d=new DOMParser,v=d.parseFromString(u,"text/xml"),p=v.querySelectorAll("SummaryRecord"),m=function(e){var t=p[e],r=t.querySelectorAll("identifier")[0].textContent,n=t.querySelectorAll("title")[0].textContent,a=t.querySelectorAll("abstract")[0].textContent,i=[];t.querySelectorAll("subject").forEach((function(e){i.push(e.textContent)}));var o={};o.title=n,o.id=r,o.abstract=a,o.keywords=i,c.push(o)},f=0;f<p.length;++f)m(f);if(h=v.querySelectorAll("SearchResults")[0],s=h.getAttribute("nextRecord"),0!=s){e.next=27;break}return e.abrupt("break",32);case 27:if(!(n>0&&s>=n)){e.next=29;break}return e.abrupt("break",32);case 29:i+=a,e.next=5;break;case 32:return e.abrupt("return",c);case 33:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function x(e){var t=e.querySelectorAll("connectPoint CI_OnlineResource linkage URL");return t&&t.length>0?t[0].textContent:""}function U(e){var t=e.querySelectorAll("onLine CI_OnlineResource protocol Anchor");return t&&0===t.length&&(t=e.querySelectorAll("onLine CI_OnlineResource protocol CharacterString")),t&&t.length>0?t[0].textContent:""}var M=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,c,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="".concat(t,"?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http://www.isotc211.org/2005/gmd&elementSetName=full&id=").concat(r,"#MD_DataIdentification"),e.next=3,fetch(n);case 3:if(a=e.sent,a.ok){e.next=6;break}return e.abrupt("return","");case 6:return e.next=8,a.text();case 8:return i=e.sent,c=new DOMParser,o=c.parseFromString(i,"text/xml"),s=x(o),l=U(o),e.abrupt("return",{id:r,url:s,protocol:l});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,c,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:0,e.next=3,I(t,r,n);case 3:for(a=e.sent,i=function(e){var r=a[e],n=M(t,r.id);n.then((function(e){r.url=e}))},c=0;c<a.length;++c)i(c);return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),k={getCSWRecord:M,getCSWRecordsWithUrl:P,getCSWRecords:I},E={name:"Search",components:{ListItem:C},data:function(){return{query:""}},props:{},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])({records:"records",displayItems:"displayItems",cswLoaded:"cswLoaded",fuse:"fuse",cswBaseUrl:"cswBaseUrl",serviceOwner:"serviceOwner"})),{},{cswBaseUrlHost:function(){return new URL(this.cswBaseUrl).hostname}}),methods:{compare:function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},getCQLQuery:function(e,t){return"type=%27service%27%20AND%20organisationName=%27".concat(e.replace(" ","%20"),"%27%20AND%20protocol=%27").concat(t.replace(" ","%20"),"%27")},search:function(){if(""!==this.query){var e=this.fuse.search(this.query,{});this.displayItems=e.map((function(e){var t=e.item;return t})).sort(this.compare)}else this.displayItems=this.records}},mounted:function(){var e=this;if(!this.cswLoaded){var t=this.$route.query.cswBaseUrl;t&&(this.cswBaseUrl=t);var r=[];r.push(this.getCQLQuery(this.serviceOwner,"OGC:WMS")),r.push(this.getCQLQuery(this.serviceOwner,"OGC:WFS"));var n=[];r.forEach((function(t){n.push(k.getCSWRecords(e.cswBaseUrl,t))})),Promise.all(n).then((function(t){var r=[];r.push(t[0].map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{serviceType:"OGC:WMS"})}))),r.push(t[1].map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{serviceType:"OGC:WFS"})})));var n=[].concat.apply([],r);n.sort(e.compare),e.records=n,e.displayItems=n;var a={shouldSort:!0,threshold:.3,location:0,distance:100,minMatchCharLength:3,ignoreLocation:!0,keys:["title","abstract","keywords"]};e.fuse=new _["a"](e.records,a),e.cswLoaded=!0}))}}},F=E,G=(r("0cb7"),Object(u["a"])(F,w,b,!1,null,"5794ad3c",null)),N=G.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"relative"}},[e.cswLoaded?e._e():r("h2",[e._v("Loading...")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.capVis&&""!==e.capXml,expression:"capVis && capXml !== ''"}]},[r("div",{attrs:{id:"capbar"}},[r("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return e.capXml},expression:"() => capXml"}]},[r("font-awesome-icon",{attrs:{icon:"clipboard"}})],1),r("button",{on:{click:function(t){e.capVis=!1}}},[r("font-awesome-icon",{attrs:{icon:"times"}})],1)]),r("prism",{attrs:{language:"xml"}},[e._v(" "+e._s(e.capXml)+" ")])],1),e.serviceInfoVis?r("div",[r("div",{attrs:{id:"capbar"}},[r("button",{on:{click:function(t){e.serviceInfoVis=!1}}},[r("font-awesome-icon",{attrs:{icon:"times"}})],1)]),r("service-info",{attrs:{serviceObject:e.serviceObject,record:e.record}})],1):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.capVis&&!e.serviceInfoVis,expression:"!capVis && !serviceInfoVis"}],attrs:{id:"container"}},[r("div",{attrs:{id:"main"}},[r("div",{ref:"map-root",attrs:{id:"map"}}),e.cswLoaded?r("div",{attrs:{id:"meta"}}):e._e()]),r("div",{attrs:{id:"mapControls"}},[r("div",{staticClass:"mapControl"},[e.serviceObject&&e.serviceObject.title?r("h3",[e._v(" "+e._s(e.serviceObject.title)+" ")]):e._e(),e._m(0)]),r("div",{staticClass:"mapControl"},[r("div",[r("label",[e._v("layer")]),e.cswLoaded?r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLayer,expression:"selectedLayer"}],attrs:{disabled:!e.layers||e.layers.length<=1},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedLayer=t.target.multiple?r:r[0]}}},e._l(e.layers,(function(t){return r("option",{key:t.Name,domProps:{value:t}},[e._v(" "+e._s(t.Title)+" ")])})),0):e._e()]),r("div",[r("label",[e._v("style")]),e.cswLoaded?r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedStyle,expression:"selectedStyle"}],attrs:{disabled:!e.styles||e.styles.length<=1},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedStyle=t.target.multiple?r:r[0]}}},e._l(e.styles,(function(t){return r("option",{key:t.Name,domProps:{value:t}},[e._v(" "+e._s(t.Title)+" ")])})),0):e._e()]),r("div",[""!=e.maxScaleDenominator?r("button",{on:{click:e.zoomTo}},[r("font-awesome-icon",{attrs:{title:"Zoom to Layer",icon:"search-plus"}})],1):e._e(),r("button",{on:{click:function(t){e.serviceInfoVis=!0}}},[r("font-awesome-icon",{attrs:{title:"Show service info",icon:"info-circle"}})],1),r("button",{on:{click:function(t){e.capVis=!0}}},[r("font-awesome-icon",{attrs:{title:"Show capabilities document",icon:"file-code"}})],1)])]),""!==e.legendUrl?r("div",{staticClass:"mapControl"},[r("h3",[e._v("Legend")]),r("div",{staticStyle:{"overflow-x":"auto"}},[""!==e.legendUrl|void 0===e.legendUrl?r("img",{attrs:{id:"legend",src:e.legendUrl}}):e._e()])]):e._e(),e.selectedLayer?r("div",{staticClass:"mapControl"},[r("layer-info",{attrs:{itemType:"Layer",item:e.selectedLayer}})],1):e._e()])])])},R=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("dl",[r("dt",[e._v("service type")]),r("dd",[e._v("OGC:WMS")])])}],q=(r("4de4"),r("c740"),r("caad"),r("c975"),r("a15b"),r("b64b"),r("2532"),r("1276"),r("a2c7")),V=r("5eee"),W=r("480c"),T=r("c810"),D=r("6792"),Z=r("d0e9"),K=r("41b9"),X=r("256f"),H=r("21bc"),J=r("c320"),Y=(r("5bc0"),r("ecee")),Q=r("c074"),z=r("ad3d"),$=r("8d51"),ee=r.n($);r("c197"),r("a878");function te(e){var t={title:e.Title,abstract:e.Abstract,keywords:e.KeywordList,fees:e.Fees,contactOrganization:e.ContactInformation.ContactPersonPrimary.ContactOrganization,contactName:e.ContactInformation.ContactPersonPrimary.ContactPerson,contactEmail:e.ContactInformation.ContactElectronicMailAddress};return t}function re(e){var t={title:e.serviceIdentification.title[0].value,abstract:e.serviceIdentification._abstract[0].value,keywords:e.serviceIdentification.keywords.map((function(e){return e.keyword[0].value})),fees:e.serviceIdentification.fees,accessConstraints:e.serviceIdentification.accessConstraints[0],contactOrganization:e.serviceProvider.providerName,contactName:e.serviceProvider.serviceContact.individualName,contactEmail:e.serviceProvider.serviceContact.contactInfo.address.electronicMailAddress[0]};return t}var ne={getServiceInfoWMS:te,getServiceInfoWFS:re},ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",[e._v(e._s(e.itemType)+" info")]),r("dl",[r("dt",[e._v("name")]),r("dd",[e._v(e._s(e.item.Name))]),r("dt",[e._v("title")]),r("dd",[e._v(e._s(e.item.Title))]),r("dt",[e._v("abstract")]),r("dd",[e._v(e._s(e.item.Abstract))])])])},ie=[],ce={name:"LayerInfo",props:{item:{required:!0,type:Object},itemType:{required:!0,type:String}},computed:{},mounted:function(){}},oe=ce,se=Object(u["a"])(oe,ae,ie,!1,null,"b1ab4b5e",null),le=se.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"serviceInfo"}},[r("h3",[e._v("service info")]),r("dl",[r("dt",[e._v("title")]),r("dd",[e._v(e._s(e.serviceObject.title))]),r("dt",[e._v("service type")]),r("dd",[e._v(e._s(e.record.protocol))]),r("dt",[e._v("service url")]),r("dd",[r("a",{attrs:{href:e.getCapUrl}},[e._v(e._s(e.getCapUrl))])]),r("dt",[e._v("service metadata url")]),r("dd",[r("a",{attrs:{href:e.getHtmlMdUrl}},[e._v(e._s(e.getHtmlMdUrl))])]),r("dt",[e._v("abstract")]),r("dd",[e._v(e._s(e.serviceObject.abstract))]),r("dt",[e._v("keywords")]),e._l(e.serviceObject.keywords,(function(t){return r("dd",{key:t},[e._v(e._s(t))])})),r("dt",[e._v("fees")]),r("dd",[e._v(e._s(e.serviceObject.fees))]),r("dt",[e._v("accessconstraints")]),r("dd",[e._v(e._s(e.serviceObject.accessConstraints))]),r("dt",[e._v("contact organization")]),r("dd",[e._v(e._s(e.serviceObject.contactOrganization))]),r("dt",[e._v("contact name")]),r("dd",[e._v(e._s(e.serviceObject.contactName))]),r("dt",[e._v("contact email")]),r("dd",[e._v(e._s(e.serviceObject.contactEmail))])],2)])},de=[],ve={name:"ServiceInfo",props:{serviceObject:{required:!0,type:Object},record:{required:!0,type:Object}},methods:{getService:function(e){var t={"OGC:WMS":"WMS","OGC:WFS":"WFS"};return t[e]}},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])({cswBaseUrl:"cswBaseUrl",serviceOwner:"serviceOwner"})),{},{getHtmlMdUrl:function(){var e=this.cswBaseUrl.replace("csw","catalog.search");return"".concat(e,"#/metadata/").concat(this.record.id)},getCapUrl:function(){var e=this.record.url;e.includes("?")&&(e=e.split("?")[0]);var t=this.getService(this.record.protocol);return"".concat(e,"?request=GetCapabilities&service=").concat(t)}}),mounted:function(){console.log(this.serviceObject),console.log(this.record)}},pe=ve,me=(r("36c5"),Object(u["a"])(pe,ue,de,!1,null,"7d0b42d8",null)),fe=me.exports;Y["c"].add([Q["a"],Q["f"],Q["e"],Q["c"],Q["d"]]);var he={name:"WMSMap",components:{Prism:ee.a,FontAwesomeIcon:z["a"],LayerInfo:le,ServiceInfo:fe},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])({cswBaseUrl:"cswBaseUrl",serviceOwner:"serviceOwner"})),{},{getCapUrl:function(){var e=this.record.url;return e.includes("?")&&(e=e.split("?")[0]),"".concat(e,"?request=GetCapabilities&service=WMS")},styles:function(){return this.selectedLayer?this.selectedLayer.Style:[]},maxScaleDenominator:function(){return void 0!==this.selectedLayer.MaxScaleDenominator?this.selectedLayer.MaxScaleDenominator:""},minScaleDenominator:function(){return Object.keys(this.selectedLayer).includes("MinScaleDenominator")?this.selectedLayer.MinScaleDenominator:""}}),data:function(){return{capVis:!1,serviceInfoVis:!1,olMap:null,serviceId:"",cswLoaded:!1,record:{},layers:[],selectedLayer:{},selectedStyle:{},olWmsLayer:{},legendUrl:"",serviceObject:{},capXml:""}},mounted:function(){var e=this;this.serviceId=this.$route.params.serviceId,k.getCSWRecord(this.cswBaseUrl,this.serviceId).then((function(t){e.record=t;var r=e.getCapUrl;fetch(r).then((function(e){return e.text()})).then((function(t){e.capXml=t;var r=new K["a"],n=r.read(t);e.serviceObject=ne.getServiceInfoWMS(n.Service);var a=[];e.layers=e.unpackLayers(n.Capability,a),e.selectedLayer=e.layers[0],e.layers.forEach((function(e){e.Style=e.Style.filter((function(e,t,r){return r.findIndex((function(t){return t.Name===e.Name}))===t}))})),e.selectedStyle=e.layers[0].Style[0]})),e.cswLoaded=!0})),this.olMap=new V["a"]({controls:Object(H["a"])().extend([new J["a"]]),target:this.$refs["map-root"],layers:[new W["a"]({source:new Z["a"]})],view:new q["a"]({zoom:7,center:[681820.9487,6832242.7535],constrainResolution:!0})}),setTimeout((function(){e.olMap.updateSize()}),200),this.olMap.getView().on("change:resolution",(function(){e.updateLegendUrl()}))},watch:{selectedLayer:function(){this.switchLayer(),this.selectedStyle=this.selectedLayer.Style[0]},selectedStyle:function(){this.switchLayer()},capVis:function(){this.capVis&&this.olWmsLayer.render()}},methods:{zoomTo:function(){var e=39.37,t=96;if(!isNaN(this.maxScaleDenominator)){var r=this.maxScaleDenominator/(e*t);this.olMap.getView().setResolution(r)}},updateLegendUrl:function(){var e=this.olMap.getView().getResolution(),t=this.olWmsLayer.getSource().getLegendUrl(e);-1!==t.indexOf("&SCALE=NaN")&&(t=t.replace("&SCALE=NaN","")),t="".concat(t,"&SLD_VERSION=1.1.0"),t="".concat(t,"&STYLE=").concat(this.selectedStyle.Name),this.legendUrl=t},switchLayer:function(){this.olWmsLayer&&this.olMap.removeLayer(this.olWmsLayer),this.olWmsLayer=this.getLayer([this.selectedLayer.Name]),this.olMap.addLayer(this.olWmsLayer),this.olMap.render(),this.updateLegendUrl()},getLayer:function(){var e=[this.selectedLayer.Name],t=[this.selectedStyle.Name],r=new D["a"]({url:this.record.url.split("?")[0],params:{LAYERS:e.join(","),STYLES:t.join(",")},ratio:1,hidpi:!1,serverType:"mapserver",projection:Object(X["f"])("EPSG:3857")});return new T["a"]({source:r})},unpackLayers:function(e,t){var r=this;return Array.isArray(e)||(e=[e]),e.forEach((function(e){"Layer"in e?r.unpackLayers(e.Layer,t):t.push(e)})),t}}},ye=he,we=(r("f8e3"),Object(u["a"])(ye,B,R,!1,null,"08f1488c",null)),be=we.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"relative"}},[e.cswLoaded?e._e():r("h2",[e._v("Loading...")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.capVis&&""!==e.capXml,expression:"capVis && capXml !== ''"}]},[r("div",{attrs:{id:"capbar"}},[r("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return e.capXml},expression:"() => capXml"}]},[r("font-awesome-icon",{attrs:{icon:"clipboard"}})],1),r("button",{on:{click:function(t){e.capVis=!1}}},[r("font-awesome-icon",{attrs:{icon:"times"}})],1)]),r("prism",{attrs:{language:"xml"}},[e._v(" "+e._s(e.capXml)+" ")])],1),e.serviceInfoVis?r("div",[r("div",{attrs:{id:"capbar"}},[r("button",{on:{click:function(t){e.serviceInfoVis=!1}}},[r("font-awesome-icon",{attrs:{icon:"times"}})],1)]),r("service-info",{attrs:{serviceObject:e.serviceObject,record:e.record}})],1):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.capVis&&!e.serviceInfoVis,expression:"!capVis && !serviceInfoVis"}],attrs:{id:"container"}},[r("div",{attrs:{id:"main"}},[r("div",{ref:"map-root",attrs:{id:"map"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.currentCoordinate,expression:"currentCoordinate"}],ref:"popup",staticClass:"popup"},[r("span",{staticClass:"icon-close",on:{click:e.closePopup}},[e._v("âœ–")]),r("div",{staticClass:"content",domProps:{innerHTML:e._s(e.featureInfo)}})]),e.cswLoaded?r("div",{attrs:{id:"meta"}}):e._e()]),r("div",{attrs:{id:"mapControls"}},[r("div",{staticClass:"mapControl"},[e.serviceObject&&e.serviceObject.title?r("h3",[e._v(" "+e._s(e.serviceObject.title)+" ")]):e._e(),e._m(0)]),r("div",{staticClass:"mapControl"},[r("h3"),r("div",[r("button",{on:{click:function(t){e.serviceInfoVis=!0}}},[r("font-awesome-icon",{attrs:{title:"Show service info",icon:"info-circle"}})],1),r("button",{attrs:{title:"Show capabilities document"},on:{click:function(t){e.capVis=!0}}},[r("font-awesome-icon",{attrs:{icon:"file-code"}})],1),r("button",{attrs:{title:"Load features on map"},on:{click:function(t){return e.loadFeatures()}}},[r("font-awesome-icon",{attrs:{icon:"download"}})],1)]),r("div",[e.cswLoaded?r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFeature,expression:"selectedFeature"}],attrs:{disabled:e.features.length<=1},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedFeature=t.target.multiple?r:r[0]}}},e._l(e.features,(function(t){return r("option",{key:t.Name,domProps:{value:t}},[e._v(" "+e._s(t.Title)+" ")])})),0):e._e()]),r("div",[r("label",[e._v("maxFeatures")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.maxFeatures,expression:"maxFeatures"}],attrs:{type:"number"},domProps:{value:e.maxFeatures},on:{input:function(t){t.target.composing||(e.maxFeatures=t.target.value)}}})])]),r("div",{staticClass:"mapControl"},[r("layer-info",{attrs:{itemType:"FeatureType",item:e.selectedFeature}})],1)])])])},Se=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("dl",[r("dt",[e._v("service type")]),r("dd",[e._v("OGC:WFS")])])}],Le=(r("b0c0"),r("25f0"),r("a2e1")),Ae=r("5831"),Oe=r("3e6b"),Ce=r("0710"),_e=r("486c"),je=r.n(_e),Ie=r("6c77"),xe=r("8682"),Ue=r("83a6"),Me=r("ce2c"),Pe=[255,255,255,1],ke=[0,153,255,1],Ee=2,Fe=[new Ie["b"]({stroke:new xe["a"]({color:Pe,width:Ee+2})}),new Ie["b"]({stroke:new xe["a"]({color:ke,width:Ee})})],Ge=[new Ie["b"]({fill:new Ue["a"]({color:[255,255,255,.5]})}),new Ie["b"]({stroke:new xe["a"]({color:Pe,width:3.5})}),new Ie["b"]({stroke:new xe["a"]({color:ke,width:2.5})})],Ne=[new Ie["b"]({image:new Me["a"]({radius:2*Ee,fill:new Ue["a"]({color:ke}),stroke:new xe["a"]({color:Pe,width:Ee/2})})})],Be={pointStyle:Ne,linestringStyle:Fe,polygonStyle:Ge};Y["c"].add([Q["f"],Q["a"],Q["c"],Q["b"]]);var Re=r("f529").WFS_2_0,qe=r("f529").OWS_1_1_0,Ve=r("f529").Filter_2_0,We=r("a6c3").XLink_1_0,Te={name:"WFSMap",components:{Prism:ee.a,FontAwesomeIcon:z["a"],LayerInfo:le,ServiceInfo:fe},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])({cswBaseUrl:"cswBaseUrl",serviceOwner:"serviceOwner"})),{},{getCapUrl:function(){var e=this.record.url;return e.includes("?")&&(e=e.split("?")[0]),"".concat(e,"?request=GetCapabilities&service=WFS&version=2.0.0")},getFeatureUrl:function(){var e=this.record.url;return e.includes("?")&&(e=e.split("?")[0]),"".concat(e,"?request=GetFeature&service=WFS&version=2.0.0&outputFormat=application/json&srsname=EPSG:3857")}}),data:function(){return{capVis:!1,olMap:null,vectorLayer:null,serviceId:"",cswLoaded:!1,record:{},features:[],selectedFeature:{},serviceObject:{},maxFeatures:1e3,capXml:"",overlay:null,featureInfo:"",currentCoordinate:null,serviceInfoVis:!1}},mounted:function(){var e=this;this.serviceId=this.$route.params.serviceId,k.getCSWRecord(this.cswBaseUrl,this.serviceId).then((function(t){e.record=t;var r=e.getCapUrl;fetch(r).then((function(e){return e.text()})).then((function(t){e.capXml=t;var r=new je.a.Context([We,Ve,qe,Re]),n=r.createUnmarshaller(),a=n.unmarshalString(t);e.serviceObject=ne.getServiceInfoWFS({serviceIdentification:a.value.serviceIdentification,serviceProvider:a.value.serviceProvider}),e.features=[],a.value.featureTypeList.featureType.forEach((function(t){var r="".concat(t.name.prefix,":").concat(t.name.localPart),n=t.title[0].value,a=t._abstract[0].value;e.features.push({Name:r,Title:n,Abstract:a})})),e.selectedFeature=e.features[0]})),e.cswLoaded=!0})),this.overlay=new Ce["a"]({element:this.$refs.popup,autoPan:!0,autoPanAnimation:{duration:250}}),this.olMap=new V["a"]({target:this.$refs["map-root"],overlays:[this.overlay],controls:Object(H["a"])().extend([new J["a"]]),layers:[new W["a"]({source:new Z["a"]})],view:new q["a"]({zoom:7,center:[681820.9487,6832242.7535],constrainResolution:!0})}),this.olMap.on("click",(function(t){console.log("click");var r=t.coordinate;if(e.currentCoordinate)e.closePopup();else{e.currentCoordinate=r;var n=e.olMap.getFeaturesAtPixel(t.pixel,{layerFilter:function(t){return t===e.vectorLayer}});if(n.length>0){var a=n[0],i=a.getProperties();delete i.geometry,Object.keys(a).includes("id_")&&!Object.keys(i).includes("id")&&(i["id"]=a.id_);var c=e.genTableFromKVPs(i);e.featureInfo=c.outerHTML,setTimeout((function(){e.overlay.setPosition(r)}),0)}else e.featureInfo=""}})),setTimeout((function(){e.olMap.updateSize()}),200)},watch:{},methods:{closePopup:function(){this.overlay.setPosition(void 0),this.currentCoordinate=null},genTableFromKVPs:function(e){var t=document.createElement("table");return t.classList.add("styled-table"),Object.keys(e).forEach((function(r){var n=document.createElement("tr"),a=document.createElement("td"),i=document.createElement("td"),c=e[r];i.innerText=null!==c?c.toString():"null ",a.innerText=r.toString(),n.appendChild(a),n.appendChild(i),t.appendChild(n)})),t},geometryStyle:function(e){var t={MultiPolygon:Be.polygonStyle,Polygon:Be.polygonStyle,MultiLineString:Be.linestringStyle,LineString:Be.linestringStyle,Point:Be.pointStyle,MultiPoint:Be.pointStyle},r=e.getGeometry().getType();return t[r]},loadFeatures:function(){var e=this,t=this.olMap.getView().calculateExtent(),r=t.join(","),n="".concat(this.getFeatureUrl,"&count=").concat(this.maxFeatures,"&typename=").concat(this.selectedFeature.Name,"&bbox=").concat(r,",EPSG:3857");fetch(n).then((function(e){return e.json()})).then((function(t){var r=new Ae["a"]({features:(new Le["a"]).readFeatures(t)});e.vectorLayer&&e.olMap.removeLayer(e.vectorLayer),e.vectorLayer=new Oe["a"]({source:r,style:e.geometryStyle}),e.olMap.addLayer(e.vectorLayer)}))}}},De=Te,Ze=(r("ce58"),Object(u["a"])(De,ge,Se,!1,null,"381c95a8",null)),Ke=Ze.exports,Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("prism",{attrs:{language:"xml"}},[e._v(" "+e._s(e.capXml)+" ")])],1)},He=[],Je={name:"Atom",components:{Prism:ee.a},computed:Object(c["a"])({},Object(o["b"])({cswBaseUrl:"cswBaseUrl",serviceOwner:"serviceOwner"})),data:function(){return{capVis:!1,capXml:"",serviceId:"",cswLoaded:!1,record:{},serviceObject:{},dataFeedObjects:[]}},mounted:function(){var e=this;this.serviceId=this.$route.params.serviceId;var t=this.cswBaseUrl;k.getCSWRecord(t,this.serviceId).then((function(t){e.record=t;var r=e.record.url;fetch(r).then((function(e){return e.text()})).then((function(t){e.capXml=t})),e.cswLoaded=!0}))},watch:{},methods:{}},Ye=Je,Qe=(r("ade4"),Object(u["a"])(Ye,Xe,He,!1,null,"93fd3512",null)),ze=Qe.exports;n["a"].use(p["a"]),n["a"].use(y.a),n["a"].config.productionTip=!1;var $e=[{path:"/home",component:N},{path:"/wms-service/:serviceId",component:be,name:"OGC:WMS"},{path:"/wfs-service/:serviceId",component:Ke,name:"OGC:WFS"},{path:"/atom-service/:serviceId",component:ze,name:"INSPIRE Atom"},{path:"/",redirect:"/home"},{path:"*",redirect:"home"}],et=new p["a"]({routes:$e});new n["a"]({store:f,router:et,render:function(e){return e(v)}}).$mount("#app")},"7e15":function(e,t,r){},"81e8":function(e,t,r){},"83e7":function(e,t,r){},"85ec":function(e,t,r){},ade4:function(e,t,r){"use strict";r("81e8")},c65b:function(e,t,r){"use strict";r("7e15")},ce58:function(e,t,r){"use strict";r("83e7")},f8e3:function(e,t,r){"use strict";r("325e")},f960:function(e,t,r){}});
//# sourceMappingURL=app.bf37fc07.js.map